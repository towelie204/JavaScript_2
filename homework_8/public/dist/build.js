!function(t){var e={};function o(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=e,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/dist/",o(o.s=0)}([function(t,e,o){"use strict";o.r(e);Vue.component("products",{data:()=>({catalogUrl:"/catalogData.json",products:[],filteredProducts:[]}),methods:{filterProducts(t){let e=new RegExp(t,"i");this.filteredProducts=this.products.filter(t=>e.test(t.title))}},mounted(){this.$parent.getJson(""+("https://raw.githubusercontent.com/towelie204/test_API/master"+this.catalogUrl)).then(t=>{for(let e of t)this.products.push(e),this.filteredProducts.push(e)})},template:'<div class="products">\n                   <product v-for="product of filteredProducts" :key="product.id" :img="img" :product="product">\n                   </product>\n               </div>'}),Vue.component("product",{props:["product"],template:'<div class="product-item">\n                    <a href="#"><img v-bind:src="product.img" alt="" width="134" height="200" class="catalog-picture" /></a>\n                    <br/>\n                    <a class="link product__title" href="#">{{product.title}}</a>\n                    <span class="product-page__price">{{product.price}}</span><br/>\n                    <button class="buy-btn" @click="$parent.$parent.$refs.cart.addProduct(product)">Купить</button>\n                </div>'});Vue.component;Vue.component("search",{data:()=>({userSearch:""}),template:'<form action="#" class="search-form" @submit.prevent=\'$parent.$refs.products.filterProducts(userSearch)\'>\n                   <input type="text" class="search-field" v-model=\'userSearch\'>\n                   <button class="btn-search" type="submit">\n                       <i class="fa fa-search"></i>\n                   </button>\n               </form>'});Vue.component;const r="https://raw.githubusercontent.com/towelie204/test_API/master";Vue.component("cart",{data:()=>({cart:[],cartUrl:"/getBasket.json",cartShow:!1}),methods:{addProduct(t){this.$parent.getJson(r+"/addToBasket.json").then(e=>{if(1===e.result){let e=this.cart.find(e=>e.title===t.title);if(e)e.count++;else{let e=Object.assign({count:1},t);this.cart.push(e)}}else console.log("error")})},removeProduct(t){this.$parent.getJson(r+"/deleteFromBasket.json").then(e=>{e.result&&(t.count>1?t.count--:this.cart.splice(this.cart.indexOf(t),1))})}},mounted(){this.$parent.getJson(""+(r+this.cartUrl)).then(t=>{for(let e of t.contents)this.cart.push(e)})},template:'<div>\n                   <div class="cart-block" v-show="cartShow">\n                       <cartItem v-for="item of cart"\n                       :key="item.title"\n                       :img="item.img"\n                       :product="item"\n                       @removeProduct="removeProduct"></cartItem>\n                   </div>\n               </div>'}),Vue.component("cartItem",{props:["product"],template:'<div class="cart-item">\n                   <div class="product-bio">\n                       <div class="product-desc">\n                           <p class="product-title">{{product.title}}</p>\n                           <p class="product-quantity">count: {{product.count}}</p>\n                           <p class="product-single-price"> {{product.price}} р</p>\n                       </div>\n                   </div>\n                   <div class="right-block">\n                       <p class="product-price">{{product.count * product.price}}</p>\n                       <button class="del-btn" @click="$root.$refs.cart.removeProduct(product)">&times;</button>\n                   </div>\n               </div>'});Vue.component;new Vue({el:"#app",methods:{getJson:t=>fetch(t).then(t=>t.json()).catch(t=>console.log(t)),postJson:(t,e)=>fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(t=>t.json()).catch(t=>{console.log(t)}),putJson:(t,e)=>fetch(t,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(t=>t.json()).catch(t=>{console.log(t)})}})}]);